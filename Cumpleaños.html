<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta para mi princesa</title>
    <link rel="icon" href="img/flowers.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="Una carta especial con un video sorpresa">
    <style>
        :root {
            --primary-color: #8a2be2;
            --secondary-color: #9370db;
            --bg-color: #2d1b3d;
            --letter-bg: #4a2c5a;
            --envelope-bg: #6a4c93;
            --text-color: #e6d7ff;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--bg-color);
            font-family: 'Caveat', cursive;
            overflow: hidden;
            transition: background-color 0.5s ease;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239370db' fill-opacity='0.08'%3E%3Cpath d='M30 45c-2 0-15-10-15-20 0-5 4-9 9-9 3 0 6 2 6 2s3-2 6-2c5 0 9 4 9 9 0 10-13 20-15 20z'/%3E%3Cpath d='M15 22.5c-1 0-7.5-5-7.5-10 0-2.5 2-4.5 4.5-4.5 1.5 0 3 1 3 1s1.5-1 3-1c2.5 0 4.5 2 4.5 4.5 0 5-6.5 10-7.5 10z' transform='translate(30 15)'/%3E%3C/g%3E%3C/svg%3E");
        }

        .envelope {
            width: 300px;
            height: 200px;
            background-color: var(--envelope-bg);
            border: 2px solid var(--secondary-color);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.5s ease;
        }

        .envelope:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 50%, var(--secondary-color) 50%);
            transition: all 0.5s ease;
        }

        .envelope:after {
            content: '‚ù§';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: var(--primary-color);
            opacity: 0.5;
        }

        .envelope.open:before {
            transform: translateY(-100%);
        }

        .letter {
            position: absolute;
            width: 260px;
            height: 160px;
            background-color: var(--letter-bg);
            padding: 20px;
            transition: all 0.8s ease;
            overflow-y: auto;
            box-shadow: 0 5px 100% rgba(0,0,0,0.1);
            border-radius: 5px;
            font-size: 1em;
            line-height: 1.6;
            text-align: left;
            background-image: 
                linear-gradient(90deg, rgba(255,105,180,0.2) 1px, transparent 1px),
                linear-gradient(rgba(255,105,180,0.2) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: 20;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
            top: 50%;
            left: 50%;
            color: var(--text-color);
        }

        .letter::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            /* background-image: url('https://picsum.photos/2000/2000?random=1');
            background-size: cover; */
            opacity: 0.08;
            pointer-events: none;
        }

        .envelope.open ~ .letter {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            width: 80vw;
            max-width: 600px;
            height: 80vh;
            max-height: 800px;
        }

        .heart {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: var(--primary-color);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .heart:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }

        .envelope.open .heart {
            display: none;
        }

        .btn {
            position: fixed;
            background-color: var(--primary-color);
            background-image: linear-gradient(135deg, var(--primary-color) 0%, #7b68ee 100%);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 30px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 30;
            font-family: 'Dancing Script', cursive;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2), 0 0 10px rgba(138,43,226,0.4);
        }

        .btn:hover {
            background-color: #7b68ee;
            background-image: linear-gradient(135deg, #7b68ee 0%, var(--primary-color) 100%);
            transform: scale(1.08) translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3), 0 0 15px rgba(138,43,226,0.6);
        }

        .open-btn {
            bottom: 30px;
            left: 30px;
        }

        .close-btn {
            top: 30px;
            right: 30px;
            display: none;
        }

        .envelope.open ~ .close-btn {
            display: block;
        }

        .envelope.open ~ .open-btn {
            display: none;
        }

        .envelope.expanded {
            opacity: 0;
            pointer-events: none;
        }

        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 40;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .dark-mode-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 0 0 10px rgba(138,43,226,0.5);
        }

        body.dark-mode {
            --bg-color: #1a0d26;
            --letter-bg: #2d1b3d;
            --envelope-bg: #4a2c5a;
            --text-color: #e6d7ff;
        }

        @media (max-width: 768px) {
            .envelope.open ~ .letter {
                width: 90vw;
                height: 70vh;
            }
            .letter {
                font-size: 0.9em;
                padding: 15px;
            }
            .btn {
                font-size: 1.2em;
                padding: 10px 20px;
            }
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        .envelope {
            animation: float 4s ease-in-out infinite;
        }

        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -1;
        }

        .heart-particle {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #8a2be2; /* Color morado */
            transform: rotate(45deg);
            animation: fall 7s linear infinite;
        }

        .heart-particle::before,
        .heart-particle::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: #8a2be2; /* Color morado */
            border-radius: 50%;
        }

        .heart-particle::before {
            top: -7.5px;
            left: 0;
        }

        .heart-particle::after {
            top: 0;
            left: -7.5px;
        }

        @keyframes fall {
            0% {
                transform: translateY(-20vh) rotate(45deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(120vh) rotate(405deg);
                opacity: 0;
            }
        }
        
        /* Estilos para las flores que caen */
        .flower-particle {
            position: absolute;
            font-size: 20px;
            animation: fall 9s linear infinite;
            z-index: -1;
            color: var(--primary-color);
        }
        
        .flower-1:after { content: 'üå∏'; }
        .flower-2:after { content: 'üå∑'; }
        .flower-3:after { content: 'üåπ'; }
        .flower-4:after { content: 'üå∫'; }
        .flower-5:after { content: 'üåª'; }
        .flower-6:after { content: 'üíê'; }


        
        /* Estilos para la carta peque√±a con video */
        .video-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 45vw; /* Ancho reducido para formato vertical (9:16) */
            max-width: 450px; /* M√°ximo ancho reducido */
            height: 80vw; /* Altura aumentada para formato vertical */
            max-height: 800px; /* M√°xima altura aumentada */
            z-index: 50;
            background-color: var(--letter-bg);
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6), 0 0 20px var(--primary-color);
            overflow: hidden;
            border: 5px solid var(--primary-color);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .video-container video, .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            object-fit: contain;
            background-color: #000;
            border-radius: 20px;
            box-shadow: inset 0 0 20px rgba(138,43,226,0.3);
            transition: all 0.5s ease;
        }
        
        .mini-envelope {
            width: 150px;
            height: 100px;
            background-color: var(--envelope-bg);
            background-image: linear-gradient(135deg, var(--envelope-bg) 0%, var(--secondary-color) 100%);
            border: 4px solid var(--secondary-color);
            border-radius: 20px;
            position: fixed;
            bottom: 30px;
            right: 30px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3), 0 0 15px rgba(138,43,226,0.4);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            z-index: 35;
            animation: float 3s ease-in-out infinite;
            transform-origin: center bottom;
        }
        
        .mini-envelope:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 50%, var(--secondary-color) 50%);
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: inset 0 0 15px rgba(255,255,255,0.5);
        }
        
        .mini-envelope:after {
            content: '\f03d';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5em;
            color: var(--primary-color);
            opacity: 0.95;
            text-shadow: 0 3px 6px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.8);
            transition: all 0.3s ease;
        }

        
        .mini-envelope.open:before {
            transform: translateY(-120%) rotate(-5deg);
        }
        
        .mini-envelope.open {
            opacity: 0;
            transform: scale(0.8) rotate(5deg);
            pointer-events: none;
        }
        
        .mini-envelope:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4), 0 0 20px rgba(138,43,226,0.6);
        }
        
        .mini-envelope:hover:after {
            transform: translate(-50%, -50%) scale(1.1);
            text-shadow: 0 4px 8px rgba(0,0,0,0.4), 0 0 15px rgba(255,255,255,0.9);
        }
        
        .close-video-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--primary-color);
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 60;
            display: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.4), 0 0 10px rgba(255,255,255,0.3);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .close-video-btn:hover {
            transform: scale(1.15) rotate(90deg);
            background-color: #7b68ee;
            box-shadow: 0 6px 15px rgba(0,0,0,0.5), 0 0 15px rgba(255,255,255,0.5);
        }

    </style>
</head>
<body>
    <!-- Contenido principal -->
    <div id="mainContent">
        <button class="dark-mode-toggle" onclick="toggleDarkMode()">üåì</button>
        <div class="envelope">
            <div class="heart" onclick="toggleEnvelope()">‚ô•</div>
        </div>
        <div class="letter" id="mainMessage"></div>
        <button class="btn open-btn" id="open">Abrir</button>
        <button class="btn close-btn" id="close">Cerrar</button>
        
        <!-- Carta peque√±a para el video -->
        <div class="mini-envelope" id="videoEnvelope"></div>
        <div class="video-container" id="videoContainer">
    <iframe id="videoPlayer" width="100%" height="100%" src="" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;"></iframe>
    <button class="close-video-btn" id="closeVideo">√ó</button>
</div>
        
        <div class="hearts"></div>
    </div>

    <script>
        // Funcionalidad de carta.js para leer mensajes personalizados desde URL
        const urlSearchParams = new URLSearchParams(window.location.search);
        const messageCustom = urlSearchParams.get('message');

        // Mensaje predeterminado si no hay mensaje personalizado
        const loveMessage = `
<p>Estimada princesa:</p>  
<p>Todo el amor que siento por ti no se compara con nada que hayas visto antes, es mucho m√°s, se podria decir que es infinito, y sigue en constante crecimiento, como el universo, y exactamente como el universo, pero m√°s grande, m√°s profundo, m√°s vasto, m√°s infinito.</p>  
<p>Te amo por quien eres, por la muejr que quieres ser, por todo lo que significas, por lo que significamos, por lo que serermos. Quiero que siemrpe estemos juntos, que seamos inseparables, los mejores amigos de toda la historia en todo momento, quiero construir todo mi mundo contigo.</p>  
<p>Me encanta estar en cada cumplea√±os tuyo mi amor, es tu dia, tu eres la celebrada, se nota la felicidad que te provoca en ti este dia, y me encanta ser parte de eso, se hacer un poquito mejor tus cumplea√±os, siempre dandote lo que quieres para ser feliz, si tu eres feliz, yo lo soy infinitamente m√°s.</p>  
<p>Siempre pens√© que mi amorcito en algun momento llegaria, y me daria cuenta de inmediato cuando fuera, lo cual si pas√≥, supe que mi amorcito eras tu, y hice todo lo posible para estar juntos, y miranos ahora, casi 3 a√±os, estoy segurisimo que tendremos muchos m√°s.</p>  
<p>Siempre ser√°s mi princesita hermosa</p>  
<p>Tu Licenciado Lucas, Besitos Infinitos </p>
        `;

        // Si hay un mensaje personalizado, usarlo; de lo contrario, usar el mensaje predeterminado
        if (messageCustom) {
            document.querySelector('#mainMessage').textContent = decodeURI(messageCustom);
        } else {
            document.querySelector('#mainMessage').innerHTML = loveMessage;
        }

        // Obtener referencias a los botones
        const btnOpenElement = document.querySelector('#open');
        const btnCloseElement = document.querySelector('#close');

        // Deshabilitar el bot√≥n de cerrar inicialmente
        btnCloseElement.disabled = true;

        // Funciones de carta.html
        function toggleEnvelope() {
            const envelope = document.querySelector('.envelope');
            envelope.classList.toggle('open');
            setTimeout(() => {
                envelope.classList.toggle('expanded');
            }, 500);
        }

        function openEnvelope() {
            const envelope = document.querySelector('.envelope');
            envelope.classList.add('open');
            setTimeout(() => {
                envelope.classList.add('expanded');
            }, 500);
            
            // Actualizar estado de los botones
            btnOpenElement.disabled = true;
            btnCloseElement.disabled = false;
        }

        function closeEnvelope() {
            const envelope = document.querySelector('.envelope');
            envelope.classList.remove('expanded');
            setTimeout(() => {
                envelope.classList.remove('open');
            }, 100);
            
            // Actualizar estado de los botones
            btnOpenElement.disabled = false;
            btnCloseElement.disabled = true;
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        function createHearts() {
            const heartsContainer = document.querySelector('.hearts');
            const numberOfHearts = 50; // Reducimos la cantidad de corazones para a√±adir flores
            const numberOfFlowers = 40; // Cantidad de flores que caer√°n

            // Crear corazones
            for (let i = 0; i < numberOfHearts; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-particle');
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animationDuration = `${7 + Math.random() * 3}s`;
                heart.style.animationDelay = `${Math.random() * -7}s`;
                heartsContainer.appendChild(heart);
            }
            
            // Crear flores
            for (let i = 0; i < numberOfFlowers; i++) {
                const flower = document.createElement('div');
                flower.classList.add('flower-particle');
                
                // Asignar un tipo de flor aleatorio (1-6)
                const flowerType = Math.floor(Math.random() * 6) + 1;
                flower.classList.add(`flower-${flowerType}`);
                
                flower.style.left = `${Math.random() * 100}%`;
                flower.style.animationDuration = `${9 + Math.random() * 4}s`; // Las flores caen m√°s lento
                flower.style.animationDelay = `${Math.random() * -9}s`;
                flower.style.transform = `scale(${0.7 + Math.random() * 0.6})`; // Tama√±o aleatorio
                heartsContainer.appendChild(flower);
            }
        }

        // Inicializar la creaci√≥n de corazones
        createHearts();

        // Agregar event listeners a los botones
        btnOpenElement.addEventListener('click', openEnvelope);
        btnCloseElement.addEventListener('click', closeEnvelope);
        
        // Funcionalidad para la carta con video
const videoEnvelope = document.querySelector('#videoEnvelope');
const videoContainer = document.querySelector('#videoContainer');
const videoPlayer = document.querySelector('#videoPlayer');
const closeVideoBtn = document.querySelector('#closeVideo');
        
        // El sobre del video est√° disponible desde el inicio
        videoEnvelope.style.display = 'block';
        
        // Video personalizado - URL de Vimeo
const videoUrl = 'https://vimeo.com/1118411970'; // Video de Vimeo
        
        function openVideoEnvelope() {
            videoEnvelope.classList.add('open');
            setTimeout(() => {
                videoContainer.style.display = 'block';
                closeVideoBtn.style.display = 'block';
                // Establecer la URL del video en el iframe
                const embedUrl = `https://player.vimeo.com/video/1118411970?autoplay=1&loop=0&title=0&byline=0&portrait=0&transparent=0&responsive=1`;
                videoPlayer.src = embedUrl;
            }, 500);
        }

        
        function closeVideoEnvelope() {
    videoContainer.style.display = 'none';
    closeVideoBtn.style.display = 'none';
    videoPlayer.src = '';
    videoEnvelope.classList.remove('open');
}

        videoEnvelope.addEventListener('click', openVideoEnvelope);
        closeVideoBtn.addEventListener('click', closeVideoEnvelope);
    </script>
</body>
</html>
